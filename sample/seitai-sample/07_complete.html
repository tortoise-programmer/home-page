<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>予約完了 - ウェブ予約</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.20/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-base-200 flex items-center justify-center p-4">
    <div class="card w-full max-w-md bg-base-100 shadow-xl">
        <div class="card-body text-center">
            <div class="text-success text-6xl mb-4">✓</div>
            <h1 class="card-title text-xl font-bold mb-4">予約が完了しました</h1>
            <p class="mb-6 text-base-content/70">
                ご予約ありがとうございます。<br>
                確認メールをお送りしましたので、<br>
                ご確認ください。
            </p>
            
            <div class="card bg-base-200 mb-6">
                <div class="card-body p-4">
                    <h2 class="card-title text-base mb-2">予約詳細</h2>
                    <div class="text-sm space-y-1" id="reservationDetails">
                        <p><strong>予約番号:</strong> <span id="reservationNumber">R240115001</span></p>
                        <p><strong>日時:</strong> <span id="reservationDateTime">2024年1月15日（月）10:00〜</span></p>
                        <p><strong>メニュー:</strong> <span id="reservationMenu">全身整体コース（60分）</span></p>
                        <p><strong>金額:</strong> <span id="reservationPrice">6,000円</span></p>
                    </div>
                </div>
            </div>
            
            <div class="space-y-3">
                <a href="01_index.html" class="btn btn-primary w-full">トップページに戻る</a>
                <a href="02_login.html" class="btn btn-secondary w-full">予約確認・変更</a>
            </div>
            
            <div class="text-xs text-base-content/50 mt-4">
                キャンセル・変更は前日までにお願いいたします
            </div>
        </div>
    </div>
    
    <script>
        function loadReservationDetails() {
            try {
                const date = sessionStorage.getItem('selectedDate') || '';
                const time = sessionStorage.getItem('selectedTime') || '';
                const plan = sessionStorage.getItem('selectedPlan') || '';
                const service = sessionStorage.getItem('selectedService') || '';
                const customerName = sessionStorage.getItem('customerName') || '山田太郎';
                
                if (!date || !time || !plan) {
                    return;
                }
                
                // プラン名の変換
                const planNames = {
                    'planA': 'プランA（30分）',
                    'planB': 'プランB（60分）',
                    'planC': 'プランC（90分）',
                    'planD': 'プランD（120分）',
                    'planE': 'プランE（180分）'
                };
                
                // 金額の計算
                const planPrices = {
                    'planA': 3500,
                    'planB': 6000,
                    'planC': 9000,
                    'planD': 12000,
                    'planE': 15000
                };
                
                const basePrice = planPrices[plan] || 6000;
                const tax = Math.round(basePrice * 0.1);
                const totalPrice = basePrice + tax;
                
                // 予約番号の生成
                const now = new Date();
                const reservationNumber = `R${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}`;
                
                // 日時の表示
                const dateObj = new Date(date);
                const month = dateObj.getMonth() + 1;
                const day = dateObj.getDate();
                const weekdays = ['日', '月', '火', '水', '木', '金', '土'];
                const weekday = weekdays[dateObj.getDay()];
                const dateTimeDisplay = `${dateObj.getFullYear()}年${month}月${day}日（${weekday}）${time}〜`;
                
                // 表示を更新
                document.getElementById('reservationNumber').textContent = reservationNumber;
                document.getElementById('reservationDateTime').textContent = dateTimeDisplay;
                document.getElementById('reservationMenu').textContent = planNames[plan] || '全身整体コース（60分）';
                document.getElementById('reservationPrice').textContent = totalPrice.toLocaleString() + '円';
                
            } catch (e) {
                console.error('予約詳細の読み込みに失敗しました:', e);
            }
        }
        
        // ページ読み込み時に予約詳細を表示
        document.addEventListener('DOMContentLoaded', loadReservationDetails);
    </script>
</body>
</html>
